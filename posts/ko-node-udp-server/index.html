<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="How to create UDP server with Node.js." /><meta name="author" content="Youngjin Kwak" /><meta property="og:locale" content="en" /><meta name="description" content="Overview This article is going to talk about how to use UDP server in Node.js. The codes in this article are written by Typescript. There will be two examples such as Server and Client." /><meta property="og:description" content="Overview This article is going to talk about how to use UDP server in Node.js. The codes in this article are written by Typescript. There will be two examples such as Server and Client." /><link rel="canonical" href="https://kkan0615.github.io/posts/ko-node-udp-server/" /><meta property="og:url" content="https://kkan0615.github.io/posts/ko-node-udp-server/" /><meta property="og:site_name" content="Youngjin_Kwak" /><meta property="og:image" content="https://kkan0615.github.io/images/nodejs-logo.png" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:image:alt" content="nodejs-logo." /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-12-04T07:30:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://kkan0615.github.io/images/nodejs-logo.png" /><meta name="twitter:image:alt" content="nodejs-logo." /><meta property="twitter:title" content="How to create UDP server with Node.js." /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Youngjin Kwak"},"dateModified":"2022-12-04T20:45:05-05:00","datePublished":"2022-12-04T07:30:00-05:00","description":"Overview This article is going to talk about how to use UDP server in Node.js. The codes in this article are written by Typescript. There will be two examples such as Server and Client.","headline":"How to create UDP server with Node.js.","image":{"width":800,"height":500,"alt":"nodejs-logo.","url":"https://kkan0615.github.io/images/nodejs-logo.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kkan0615.github.io/posts/ko-node-udp-server/"},"url":"https://kkan0615.github.io/posts/ko-node-udp-server/"}</script><title>How to create UDP server with Node.js. | Youngjin_Kwak</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Youngjin_Kwak"><meta name="application-name" content="Youngjin_Kwak"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/46660361?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Youngjin_Kwak</a></div><div class="site-subtitle font-italic">Youngjin Hellow world</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/kkan0615" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kkan0615','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>How to create UDP server with Node.js.</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>How to create UDP server with Node.js.</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1670157000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 4, 2022 </em> </span> <span> Updated <em class="" data-ts="1670204705" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 4, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="/../images/nodejs-logo.png" class="preview-img bg" alt="nodejs-logo." width="800" height="500" data-proofer-ignore><figcaption class="pt-2 pb-2">nodejs-logo.</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> Youngjin_kwak </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="673 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><hr /><h1 id="overview">Overview</h1><p>This article is going to talk about how to use UDP server in Node.js. The codes in this article are written by Typescript. There will be two examples such as Server and Client.</p><h1 id="setup-project">Setup project</h1><p>Setup Typescript project. You can pass this step</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm init <span class="nt">-y</span>
</pre></table></code></div></div><ul><li>start Node.js package<div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm i ts-node
</pre></table></code></div></div><li>ts-node is used for running typescript file without compiling</ul><h1 id="setup-server">Setup server</h1><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">createSocket</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">dgram</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">createSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">udp4</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="mi">12778</span><span class="p">)</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">listening</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">addressInfo</span> <span class="o">=</span> <span class="nx">server</span><span class="p">.</span><span class="nx">address</span><span class="p">()</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Server is working on </span><span class="p">${</span><span class="nx">addressInfo</span><span class="p">.</span><span class="nx">address</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">addressInfo</span><span class="p">.</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">remote</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Serve get message: </span><span class="p">${</span><span class="nx">msg</span><span class="p">.</span><span class="nx">toString</span><span class="p">()}</span><span class="s2"> from </span><span class="p">${</span><span class="nx">remote</span><span class="p">.</span><span class="nx">address</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">remote</span><span class="p">.</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
<span class="p">})</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Close successfully</span><span class="dl">'</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`server error: </span><span class="p">${</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span>
<span class="p">})</span>
</pre></table></code></div></div><p>Server will run on port 12778 with 0:0:0:0 address</p><h2 id="createsockettype-or-options--callback"><span class="mr-2">createSocket([type or options] [, callback])</span><a href="#createsockettype-or-options--callback" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">createSocket</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">dgram</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">createSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">udp4</span><span class="dl">'</span><span class="p">)</span>
</pre></table></code></div></div><p>createSocket function returns socket object.</p><h3 id="parameter"><span class="mr-2">Parameter</span><a href="#parameter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>types [string]: <code class="language-plaintext highlighter-rouge">udp4</code> or <code class="language-plaintext highlighter-rouge">udp6</code> <br /> or <br /> options</p><ul><li>type [string]: The family of socket. Must be either ‘udp4’ or ‘udp6’. Required.<li>reuseAddr [boolean]: When true socket.bind() will reuse the address, even if another process has already bound a socket on it. Default: false.<li>ipv6Only [boolean]: Setting ipv6Only to true will disable dual-stack support, i.e., binding to address :: won’t make 0.0.0.0 be bound. Default: false.<li>recvBufferSize [number]: Sets the SO_RCVBUF socket value.<li>sendBufferSize [number]: Sets the SO_SNDBUF socket value.<li>lookup [Function]: Custom lookup function. Default: dns.lookup().<li>signal [AbortSignal]: An AbortSignal that may be used to close a socket.</ul><p>and <br /> callback [Function] : Attached as listener to <code class="language-plaintext highlighter-rouge">message</code> events</p><h2 id="bindport-address-callback-function"><span class="mr-2">bind([port][, address][, callback]) function</span><a href="#bindport-address-callback-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">server</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="mi">12778</span><span class="p">)</span> <span class="c1">// set port</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="dl">'</span><span class="s1">127.0.0.1</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// set address</span>
</pre></table></code></div></div><p>bind function is used for binding port and address. <br /> You don’t have to bind an address. If address is not passed, default address is 0:0:0:0.</p><h2 id="on"><span class="mr-2">on()</span><a href="#on" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">listening</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{...})</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">remote</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{...})</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{...})</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{...})</span>
</pre></table></code></div></div><p>Listen events that is passed in parameter. Following table is the events list that socket listen</p><div class="table-wrapper"><table><thead><tr><th>Events<th>Description<tbody><tr><td>close<td>It’s emitted after a socket is closed with <code class="language-plaintext highlighter-rouge">close()</code> functions<tr><td>connect<td>It’s emitted after a socket is connected with remote address successfully<tr><td>error<td>It’s emitted after a socket encounters errors<tr><td>listening<td>It’s emitted once after <code class="language-plaintext highlighter-rouge">bind</code> functions<tr><td>message<td>It’s emitted whenever a new message buffer is available on socket</table></div><h2 id="closecallback"><span class="mr-2">close([callback])</span><a href="#closecallback" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">server</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span>
</pre></table></code></div></div><p>Close socket and stop listening for buffer data</p><h1 id="setup-client">Setup client</h1><p>The way to setup client is very similar as server</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">createSocket</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">dgram</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">createSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">udp4</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="mi">12777</span><span class="p">)</span>

<span class="kd">let</span> <span class="nx">clientCount</span> <span class="o">=</span> <span class="mi">0</span>
<span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">messageBuffer</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="s2">`Client send a data to server. Time: </span><span class="p">${</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()}</span><span class="s2">`</span><span class="p">)</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">messageBuffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">messageBuffer</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">12778</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">bytes</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="k">throw</span> <span class="nx">error</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">clientCount</span><span class="o">++</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">client</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span>
      <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>Client will run on port 12777 with 0:0:0:0 address<li>Client will send a message buffer to the server which port is 12778 every a second</ul><h3 id="sendmsg-offset-length-port-address-callback"><span class="mr-2">send(msg[, offset, length][, port][, address][, callback])</span><a href="#sendmsg-offset-length-port-address-callback" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">messageBuffer</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="s2">`Client send a data to server. Time: </span><span class="p">${</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()}</span><span class="s2">`</span><span class="p">)</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">messageBuffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">messageBuffer</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">12778</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">bytes</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="k">throw</span> <span class="nx">error</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">clientCount</span><span class="o">++</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span>
    <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></table></code></div></div><p>Send message buffer to port and address which are passed as parameters. <br /> Address can be ignored and default address will be 0:0:0:0</p><h3 id="send-multiple-messages"><span class="mr-2">Send multiple messages</span><a href="#send-multiple-messages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">data1</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">data2</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="dl">'</span><span class="s1">world</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">send</span><span class="p">([</span><span class="nx">data1</span><span class="p">,</span> <span class="nx">data2</span><span class="p">],</span> <span class="mi">12778</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="k">throw</span> <span class="nx">error</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">send()</code> function allows to send more than one message buffer to the server. server will receive data as a combined message like<code class="language-plaintext highlighter-rouge">helloworld</code></p><h1 id="ref">Ref</h1><ul><li><a href="https://nodejs.org/api/dgram.html">Node.js document</a><li><a href="https://gist.github.com/sid24rane/6e6698e93360f2694e310dd347a2e2eb">udp.js github gis</a></ul><h1 id="support">Support</h1><p><a href="https://www.buymeacoffee.com/youngjinkwak"><img data-src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="&quot;Buy Me A Coffee&quot;" data-proofer-ignore></a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/nodejs/'>nodejs</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="//tags/nodejs/" class="post-tag no-text-decoration" >nodejs</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How+to+create+UDP+server+with+Node.js.+-+Youngjin_Kwak&url=https%3A%2F%2Fkkan0615.github.io%2Fposts%2Fko-node-udp-server%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=How+to+create+UDP+server+with+Node.js.+-+Youngjin_Kwak&u=https%3A%2F%2Fkkan0615.github.io%2Fposts%2Fko-node-udp-server%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fkkan0615.github.io%2Fposts%2Fko-node-udp-server%2F&text=How+to+create+UDP+server+with+Node.js.+-+Youngjin_Kwak" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ko-node-udp-server/">How to create UDP server with Node.js.</a><li><a href="/posts/ko-winston/">Express JS + Typescript 로깅 시스템</a><li><a href="/posts/alternative-git-checkout/">Alternative way of "git checkout"</a><li><a href="/posts/ko-stop-using-andand-in-react/">React에서 조건문으로 랜더링시 "&&" 사용하지 맙시다</a><li><a href="/posts/js-bigint/">Javascript Bigint</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/coding-test/">coding-test</a> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/electron/">electron</a> <a class="post-tag" href="/tags/getting-started/">getting started</a> <a class="post-tag" href="/tags/kakao/">kakao</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/react/">react</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ko-winston/"><div class="card-body"> <em class="small" data-ts="1669522860" data-df="ll" > Nov 26, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Express JS + Typescript 로깅 시스템</h3><div class="text-muted small"><p> Overview winston 라이브러리를 사용해서 로깅 시스템을 만들 것입니다. winston은 node js에서 사용 할 수 있는 logger 입니다. 기본적으로 많은 기능을 제공하기 때문에, winston은 많은 곳에서 사용 되고 있습니다. 이 포스팅은 3.8.2 버전을 사용 중에 있습니다. winston 설치 npm install wins...</p></div></div></a></div><div class="card"> <a href="/posts/alternative-git-checkout/"><div class="card-body"> <em class="small" data-ts="1668075660" data-df="ll" > Nov 10, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Alternative way of "git checkout"</h3><div class="text-muted small"><p> What is “checkout” checkout is used for switch branch or restore working tree files. # Move to specific branch git checkout &amp;lt;branch-name&amp;gt; # Create new branch and then move to that branch gi...</p></div></div></a></div><div class="card"> <a href="/posts/ko-stop-using-andand-in-react/"><div class="card-body"> <em class="small" data-ts="1667633400" data-df="ll" > Nov 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>React에서 조건문으로 랜더링시 "&&" 사용하지 맙시다</h3><div class="text-muted small"><p> Overview React 내에서 조건적으로 Rendering 하는 방법은 많습니다. 그중에서 이 포스팅은 “&amp;amp;&amp;amp;”을 이용한 조건 Rendering 에 관한 이야기를 할 것입니다. “&amp;amp;&amp;amp;” 을 사용하여 Rendering 할 경우 코드는 가독성은 좋지만, 가끔 UI 버그를 유발하는 경우가 있습니다. 그래서 이 포스팅은 왜...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="//posts/ko-winston/" class="btn btn-outline-primary" prompt="Older"><p>Express JS + Typescript 로깅 시스템</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/kkan0615">Youngjin_kwak</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/coding-test/">coding-test</a> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/electron/">electron</a> <a class="post-tag" href="/tags/getting-started/">getting started</a> <a class="post-tag" href="/tags/kakao/">kakao</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/react/">react</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Y8PG1C4RNK"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Y8PG1C4RNK'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8453861178514456" crossorigin="anonymous"></script>
